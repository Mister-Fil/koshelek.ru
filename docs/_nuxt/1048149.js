(window.webpackJsonp=window.webpackJsonp||[]).push([[11,3,5],{346:function(t,e,n){"use strict";n.r(e);var r={name:"ItemFavoriteTable",computed:{getFavorites:function(){return this.$store.getters["item/getFavorites"]}},methods:{removeFavorite:function(t){this.$store.dispatch("item/removeFavorite",t)}}},o=n(69),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"overflow-auto h-100"},[n("table",{staticClass:"table table-hover"},[n("tbody",t._l(t.getFavorites,(function(e){return n("tr",{key:e.id},[n("td",{staticClass:"w-100"},[t._v("\n          "+t._s(e.name)+"\n        ")]),t._v(" "),n("td",[0!==e.id?n("b-btn",{attrs:{variant:"outline-danger"},on:{click:function(n){return t.removeFavorite(e)}}},[t._v("\n            remove\n          ")]):t._e()],1)])})),0)])])}),[],!1,null,null,null);e.default=component.exports},347:function(t,e,n){"use strict";n.r(e);n(1);var r={name:"ItemHistoryTable",props:{filterEvent:{type:String,default:""}},data:function(){return{fields:[{key:"event",label:"Событие",class:"align-middle text-center",sortable:!0},{key:"item.id",label:"id",class:"align-middle",sortable:!0},{key:"item.name",label:"Наименование",class:"align-middle",sortable:!0},{key:"date",label:"Дата и время",class:"align-middle",sortable:!0}],filters:{event:""}}},computed:{getLogs:function(){return this.$store.getters["item/getLogs"]},getLogsFilter:function(){var t=this;if(""===this.filters.event)return this.$store.getters["item/getLogsFilter"];var e=this.getLogs.filter((function(e){return t.filters.event===e.event}));return e[0]?e:[]}},mounted:function(){this.filters.event=this.filterEvent},methods:{setItemFilter:function(t,e){this.$store.commit("item/setFilter",{fieldName:t,value:e})}}},o=n(69),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-table",{attrs:{"thead-class":"text-nowrap",striped:"","head-variant":"light","sticky-header":"100%",hover:"","no-border-collapse":"",items:t.getLogsFilter,fields:t.fields},scopedSlots:t._u([{key:"cell(event)",fn:function(data){return[n("b-badge",{attrs:{variant:"added"===data.value?"success":"warning"}},[t._v(t._s(data.value)+"\n    ")])]}},{key:"cell(item.id)",fn:function(data){return[t._v(t._s(data.value))]}},{key:"cell(item.name)",fn:function(data){return[t._v(t._s(data.value))]}},{key:"cell(date)",fn:function(data){return[n("div",{},[t._v("\n      "+t._s(t.$DateTime.fromMillis(data.value).setLocale("ru").toLocaleString(t.$DateTime.DATETIME_MED_WITH_SECONDS))+"\n    ")])]}}])})}),[],!1,null,null,null);e.default=component.exports},349:function(t,e,n){"use strict";(function(t){n(15),n(102),n(126),n(16),n(20),n(23),n(56),n(40),n(3),n(57),n(60),n(47);function r(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,d=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return d=t.done,t},e:function(t){c=!0,l=t},f:function(){try{d||null==n.return||n.return()}finally{if(c)throw l}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}e.a={data:function(){return{selectedOwn:!0,selectedOwn2:!1,setting:{gridX:20,gridY:20,isCollide:!1,draggable:!0,resizable:!0,minw:200,minh:80,axis:"both",parentLim:!0,snapToGrid:!0,aspectRatio:!1,color:"#f8f9fa",class:""},windows:[{id:1,title:"Окно избранное",isView:!1,isDefault:!0,isCollide:!0},{id:2,title:"Окно история добавлений",isView:!1,isDefault:!0},{id:3,title:"Окно история удалений",isView:!1,isDefault:!0},{id:4,title:"Окно четыре",isView:!1,isDefault:!1},{id:5,title:"Окно пять",isView:!1,isDefault:!1},{id:6,title:"Окно шесть",isView:!1,isDefault:!1},{id:7,title:"Окно семь",isView:!1,isDefault:!1}],listWidth:0,listHeight:0}},computed:{isCollide:function(t,e){return!(t.top+t.height<e.top||t.top>e.top+e.height||t.left+t.width<e.left||t.left>e.left+e.width)},rects:function(){return this.$store.state.rect.rects},getRectItems:function(){return this.$store.getters["rect/getRectItems"]},getCheckWindows:function(){var e=this;return this.windows.map((function(n){var r=t.find(e.getRectItems,["id",n.id]);return n.isView=!!r,n}))}},mounted:function(){var t=this,e=this.$refs.list;this.listWidth=e.clientWidth,this.listHeight=e.clientHeight,window.addEventListener("resize",(function(){t.listWidth=e.clientWidth,t.listHeight=e.clientHeight})),this.isAnyOpenWindow()||this.openDefaultWindows()},methods:{isAnyOpenWindow:function(){return t.findIndex(this.windows,["isView",!0])>-1},openDefaultWindows:function(){var t,e=r(this.getCheckWindows);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.isDefault&&this.openWindowBlock(n)}}catch(t){e.e(t)}finally{e.f()}},openAllWindows:function(){var t,e=r(this.getCheckWindows);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.isView||this.openWindowBlock(n)}}catch(t){e.e(t)}finally{e.f()}},closeAllWindows:function(){var t,e=r(this.getCheckWindows);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.isView&&this.removeWindowBlock(n.id)}}catch(t){e.e(t)}finally{e.f()}},changeWindowStatus:function(t){t.isView?this.openWindowBlock(t):this.removeWindowBlock(t.id)},openWindowBlock:function(e){var n=t.merge({},this.$store.getters["rect/getRectBlank"]);n.id=e.id,n.isCollide=e.isCollide||!1,n.top=50*e.id,n.left=50*e.id,n.title=e.title,this.$store.commit("rect/setRect",n),this.$store.dispatch("rect/changeZToTop",{rectId:n.id})},removeWindowBlock:function(t){this.$store.commit("rect/removeRect",t)},activateEv:function(t){this.$store.dispatch("rect/setActive",{rectId:t}),this.$store.dispatch("rect/changeZToTop",{rectId:t})},deactivateEv:function(t){this.$store.dispatch("rect/unsetActive",{rectId:t})},changePosition:function(t,e){this.$store.dispatch("rect/setTop",{id:e,top:t.top}),this.$store.dispatch("rect/setLeft",{id:e,left:t.left}),this.$store.dispatch("rect/setWidth",{id:e,width:t.width}),this.$store.dispatch("rect/setHeight",{id:e,height:t.height})},changeSize:function(t,e){this.$store.dispatch("rect/setTop",{id:e,top:t.top}),this.$store.dispatch("rect/setLeft",{id:e,left:t.left}),this.$store.dispatch("rect/setWidth",{id:e,width:t.width}),this.$store.dispatch("rect/setHeight",{id:e,height:t.height})}}}}).call(this,n(119))},350:function(t,e,n){var content=n(356);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(121).default)("1788f258",content,!0,{sourceMap:!1})},355:function(t,e,n){"use strict";n(350)},356:function(t,e,n){var r=n(120)(!1);r.push([t.i,".rect-block{width:100%;height:100%;display:inline-block;position:absolute}",""]),t.exports=r},386:function(t,e,n){"use strict";n.r(e);var r=n(349).a,o=(n(355),n(69)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex-column"},[n("div",{staticClass:"d-flex bg-light"},[n("b-dd",{staticClass:"m-1 dropdown-tools",attrs:{id:"dropdown-1",text:"Файл","toggle-class":"text-dark",variant:"outline-light",disabled:""}},[n("b-dd-item",[t._v("Для наполненности =)")])],1),t._v(" "),n("b-dd",{staticClass:"m-1 dropdown-tools",attrs:{id:"dropdown-1",text:"Окна","toggle-class":"text-dark",variant:"outline-light"}},[n("b-dd-item",{staticClass:"text-center",on:{click:function(e){return t.openAllWindows()}}},[t._v(" Открыть все окна ")]),t._v(" "),n("b-dd-divider"),t._v(" "),t._l(t.getCheckWindows,(function(e){return[n("b-dd-form",{key:e.id},[n("b-form-checkbox",{on:{change:function(n){return t.changeWindowStatus(e)}},model:{value:e.isView,callback:function(n){t.$set(e,"isView",n)},expression:"itemWindow.isView"}},[t._v("\n            "+t._s(e.title)+"\n          ")])],1)]})),t._v(" "),n("b-dd-divider"),t._v(" "),n("b-dd-item",{staticClass:"text-center",on:{click:function(e){return t.closeAllWindows()}}},[t._v(" Закрыть все окна ")])],2),t._v(" "),n("b-dd",{staticClass:"m-1 dropdown-tools",attrs:{id:"dropdown-1",text:"Настройки","toggle-class":"text-dark",variant:"outline-light",disabled:""}},[n("b-dd-item",[t._v("Настроек нет, но все может измениться")])],1)],1),t._v(" "),n("div",{ref:"list",staticClass:"w-100 h-100 position-relative"},t._l(t.rects,(function(rect,e){return n("drag-resize",{key:rect.id,attrs:{id:rect.id,w:rect.width,h:rect.height,x:rect.left,y:rect.top,z:rect.zIndex,"is-active":rect.active,collide:rect.isCollide,"grid-x":t.setting.gridX,"grid-y":t.setting.gridY,"parent-w":t.listWidth,"parent-h":t.listHeight,axis:t.setting.axis,minw:t.setting.minw,minh:t.setting.minh,"is-draggable":t.setting.draggable,"is-resizable":t.setting.resizable,"parent-limitation":t.setting.parentLim,"snap-to-grid":t.setting.snapToGrid,"aspect-ratio":t.setting.aspectRatio,"content-class":t.setting.class},on:{activated:function(e){return t.activateEv(rect.id)},deactivated:function(e){return t.deactivateEv(rect.id)},dragging:function(n){return t.changePosition(n,e)},resizing:function(n){return t.changeSize(n,e)}}},[n("div",{staticClass:"rect-block d-flex flex-column shadow bg-white"},[n("div",{staticClass:"d-flex bg-secondary text-white rounded",class:{"bg-blue":rect.active}},[n("b-dd",{staticClass:"dropdown-confirm",attrs:{dropright:"",variant:"danger","toggle-class":"text-decoration-none px-2 py-0 m-1","no-caret":"","menu-class":"shadow"},scopedSlots:t._u([{key:"button-content",fn:function(){return[t._v(" X ")]},proxy:!0}],null,!0)},[t._v(" "),n("b-dd-item-btn",{attrs:{variant:"danger"},on:{click:function(e){return t.removeWindowBlock(rect.id)}}},[t._v(" Да ")]),t._v(" "),n("b-dd-item-btn",{attrs:{variant:"secondary",size:"lg"}},[t._v(" Нет ")])],1),t._v(" "),n("div",{staticClass:"flex-fill text-center pt-1"},[t._v(t._s(rect.title))])],1),t._v(" "),n("div",{staticClass:"overflow-hidden h-100 p-1"},[1===rect.id?[n("item-favorite-table")]:t._e(),t._v(" "),2===rect.id?[n("item-history-table",{attrs:{"filter-event":"added"}})]:t._e(),t._v(" "),3===rect.id?[n("item-history-table",{attrs:{"filter-event":"removed"}})]:t._e()],2),t._v(" "),n("div",{staticClass:"border-top border-secondary bg-light text-secondary px-1"},[n("span",[t._v("x"+t._s(rect.left)+" - y"+t._s(rect.top))]),t._v(" "),n("span",[t._v(" | ")]),t._v(" "),n("span",[t._v(t._s(rect.width)+" х "+t._s(rect.height))])])])])})),1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{ItemFavoriteTable:n(346).default,ItemHistoryTable:n(347).default,DragResize:n(379).default})}}]);